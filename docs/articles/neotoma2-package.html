<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The neotoma2 R Package • neotoma2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The neotoma2 R Package">
<meta property="og:description" content="neotoma2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">neotoma2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/neotoma2-package.html">The neotoma2 R Package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/NeotomaDB/neotoma2/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="neotoma2-package_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="neotoma2-package_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="neotoma2-package_files/leaflet-1.3.1/leaflet.js"></script><link href="neotoma2-package_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="neotoma2-package_files/proj4-2.6.2/proj4.min.js"></script><script src="neotoma2-package_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="neotoma2-package_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="neotoma2-package_files/leaflet-binding-2.1.2/leaflet.js"></script><script src="neotoma2-package_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="neotoma2-package_files/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script><link href="neotoma2-package_files/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet">
<link href="neotoma2-package_files/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet">
<script src="neotoma2-package_files/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script><script src="neotoma2-package_files/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script><script src="neotoma2-package_files/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The neotoma2 R Package</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NeotomaDB/neotoma2/blob/HEAD/vignettes/neotoma2-package.Rmd" class="external-link"><code>vignettes/neotoma2-package.Rmd</code></a></small>
      <div class="hidden name"><code>neotoma2-package.Rmd</code></div>

    </div>

    
    
<div class="figure">
<img src="images/siteshot.png" style="width:100.0%" alt=""><p class="caption">closeup of several Neotoma sites in the
Caribbean.</p>
</div>
<div class="section level2">
<h2 id="neotoma-resources">Neotoma Resources<a class="anchor" aria-label="anchor" href="#neotoma-resources"></a>
</h2>
<p>The <a href="https://www.neotomadb.org" class="external-link">Neotoma Paleoecology
Database</a> is a domain-specific data resource containing millions of
fossil records from around the globe, covering the last 5.4 million
years. The <code>neotoma2</code> R package simplifies some of the data
structures and concepts to facilitate statistical analysis and
visualization. Users may wish to gain a deeper understanding of the
resource itself, or build more complex data objects and relationships.
For those users a partial list is provided here, including a table of
code examples focusing on different geographic regions, languages and
dataset types.</p>
<div class="section level3">
<h3 id="resources">Resources<a class="anchor" aria-label="anchor" href="#resources"></a>
</h3>
<ul>
<li>
<a href="https://www.neotomadb.org" class="external-link">Neotoma Homepage</a>
<ul>
<li>The Neotoma homepage, with links to contacts, news and other tools
and resources.</li>
</ul>
</li>
<li>
<a href="https://open.neotomadb.org/manual/" class="external-link">Neotoma Database
Manual</a>
<ul>
<li>Documentation for the database itself, with examples of SQL queries
and descriptions of Neotoma tables.</li>
</ul>
</li>
<li>
<a href="https://api.neotomadb.org/" class="external-link">Neotoma (JSON) API</a>
<ul>
<li>A tool to obtain data in JSON format directly through calls to
Neotoma.</li>
</ul>
</li>
<li>
<a href="https://github.com/NeotomaDB" class="external-link">Neotoma GitHub
Organization</a>
<ul>
<li>Open code repositories to see how folks are using Neotoma and what
kinds of projects we’re working on.</li>
</ul>
</li>
<li>Workshops and Code Examples (<a href="#workshops-and-code-examples">see the section below</a>)</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="neotoma-data-structure">Neotoma Data Structure<a class="anchor" aria-label="anchor" href="#neotoma-data-structure"></a>
</h2>
<div class="figure">
<img src="images/siteboundarydiagram.svg" style="width:100.0%" alt=""><p class="caption">Three panels showing context for Neotoma’s geographic
representation of sites. In panel a a site is defined by the boundaries
of a lake. The site also has a bounding box, and the core location is
defined by a collection unit within the site that is defined with
precise coordinates. In panel b a site is defined as a single point, for
example, from a textual reference indicating the site is at the
intersection of two roads. Here the site and collection unit share the
unique point location. In panel c we show how that site location may be
obfuscated using a bounding box as the site delimiter. In this case the
collection unit would not be defined (but is represented as the triangle
for illustration). Figure obtained from the Neotoma Database Manual.</p>
</div>
<p>Data in Neotoma is associated with sites, specific locations with
lat/long coordinates. Within a site, there may be one or more <a href="https://open.neotomadb.org/manual/dataset-collection-related-tables-1.html#CollectionUnits" class="external-link"><strong>collection
units</strong></a> – locations at which samples are physically collected
within the site. For example, an archaeological <strong>site</strong>
may have one or more <strong>collection units</strong>, pits within a
broader dig site; a pollen sampling <strong>site</strong> on a lake may
have multiple <strong>collection units</strong> – core sites within the
lake basin. Collection units may have higher resolution GPS locations,
but are considered to be part of the broader site. Within a
<strong>collection unit</strong> data is collected at various
[<strong>analysis units</strong>] from which <strong>samples</strong>
are obtained.</p>
<p>Because Neotoma is made up of a number of constituent databases
(e.g., the Indo-Pacific Pollen Database, NANODe, FAUNMAP), a set of
<strong>sample</strong>s associated with a <strong>collection
unit</strong> are assigned to a single <strong>dataset</strong>
associated with a particular <strong>dataset type</strong> (e.g.,
pollen, diatom, vertebrate fauna) and <strong>constituent
database</strong>.</p>
<div class="figure">
<img src="images/site_collunit_dataset.svg" style="width:50.0%" alt=""><p class="caption"><strong>Figure</strong>. <em>The structure of sites,
collection units and datasets within Neotoma. A site contains one or
more collection units. Chronologies are associated with collection
units. Data of a common type (pollen, diatoms, vertebrate fauna) are
assigned to a dataset.</em></p>
</div>
<p>Researchers often begin by searching for sites within a particular
study area, whether that is defined by geographic or political
boundaries. From there they interrogate the available datasets for their
particular dataset type of interest. When they find records of interest,
they will then often call for the data and associated chronologies.</p>
<p>The <code>neotoma2</code> R package is intended to act as the
intermediary to support these research activities using the Neotoma
Paleoecology Database. Because R is not a relational database, we needed
to modify the data structures of the objects. To do this the package
uses a set of S4 objects to represent different elements within the
database.</p>
<div class="figure">
<img src="images/neotomaUML_as.svg" style="width:100.0%" alt=""><p class="caption">A diagram showing the different major classes within
the <code>neotoma2</code> R package, and the way the elements are
related to one another. Individual boxes represent the major classes
(sites, site, collectionunits, etc.). Each box then has a list of the
specific metadata contained within the class, and the variable type
(e.g., <em>siteid: integer</em>). Below these are the functions that can
be applied to the object (e.g., <em><code>[[&lt;-</code></em>).</p>
</div>
<p>It is important to note, here and elsewhere: <strong>Almost
everything you will interact with is a <code>sites</code>
object</strong>. A <code>sites</code> object is the general currency of
this package. <code>sites</code> may have more or less metadata
associated with them, but they are the primary object, and, as you can
see in the diagram above, they have the most functions associated with
them.</p>
<div class="section level3">
<h3 id="package-requirements">Package Requirements<a class="anchor" aria-label="anchor" href="#package-requirements"></a>
</h3>
<p>The earlier <code>neotoma</code> package tried to use base R as much
as possible. The <code>neotoma2</code> package now draws primarily on
<code>dplyr</code> and <code>purrr</code> packages from the
<code>tidyverse</code>, and on the <code>sf</code> spatial data package.
The choice to integrate <code>tidyverse</code> packages was made largely
because of the current ubiquity of the <code>tidyverse</code> in R
education.</p>
</div>
</div>
<div class="section level2">
<h2 id="site-searches">Site Searches<a class="anchor" aria-label="anchor" href="#site-searches"></a>
</h2>
<p>The highest level object in Neotoma is the <strong>site</strong>.
Sites have spatial coordinates and, in many cases, additional metadata
related to lake parameters, or other site-specific properties.</p>
<p>Sites can be searched using the <code><a href="../reference/get_sites.html">get_sites()</a></code> function,
or, can be created using the <code><a href="../reference/set_site.html">set_site()</a></code> function. A single
<code>site</code> object is a special object in R, that can be combined
with other sites into a <code>sites</code> object. A <code>sites</code>
object is effectively a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> of <code>site</code> objects
with special methods for printing, plotting and exporting
information.</p>
<div class="section level3">
<h3 id="finding-sites">Finding Sites<a class="anchor" aria-label="anchor" href="#finding-sites"></a>
</h3>
<p>All sites in Neotoma have a unique numeric identifier. With the
<code>neotoma2</code> package you can search for a site using the
<code><a href="../reference/get_sites.html">get_sites()</a></code> function by its unique site id
(<code>siteid</code>), by name (<code>sitename</code>), by altitude
(<code>altmin</code>, <code>altmax</code>), by geopolitical name
(<code>gpid</code>), location (<code>loc</code>) or age bounds.</p>
<p>If we’re looking for a site and we know its specific identifier, we
can use the simplest implementation of <code><a href="../reference/get_sites.html">get_sites()</a></code>. Here we
are searching for a site (Alexander Lake), where we know that the siteid
for the record in Neotoma is <code>24</code>. We can get these siteids
using the <a href="https://apps.neotomadb.org/explorer/" class="external-link">Neotoma
Explorer web application</a>, or if we have some familiarity with the
site records already.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Search for site by a single numeric ID:</span></span>
<span><span class="va">alex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span><span class="fl">24</span><span class="op">)</span></span>
<span><span class="va">alex</span></span>
<span><span class="co">#&gt;  siteid       sitename      lat      long altitude</span></span>
<span><span class="co">#&gt;      24 Alexander Lake 53.33333 -60.58333      143</span></span>
<span></span>
<span><span class="co"># Search for sites with multiple IDs using c():</span></span>
<span><span class="va">multiple_sites</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">24</span>, <span class="fl">47</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">multiple_sites</span></span>
<span><span class="co">#&gt;  siteid       sitename      lat      long altitude</span></span>
<span><span class="co">#&gt;      24 Alexander Lake 53.33333 -60.58333      143</span></span>
<span><span class="co">#&gt;      47        Liberty 43.52000 -90.78000      305</span></span></code></pre></div>
<p>Once you search for a site, the <code>neotoma2</code> R package makes
a call to the Neotoma Database, and returns a structured
<code>sites</code> object that contains metadata about the sites, and
some additional metadata about collection units and datasets at those
sites. This limited metadata helps speed up further searches, but is not
complete, for the purposes of analysis.</p>
<div class="figure">
<img src="images/understanding_S4_structure_get_sites.svg" style="width:100.0%" alt=""><p class="caption">The result of a hypothetical <code><a href="../reference/get_sites.html">get_sites()</a></code>
call, is a <code>sites</code> object containing two individual
<code>site</code> objects. Each <code>site</code> object contains a
<code>collunits</code> object with some limited metadata. The top
<code>site</code> appears to have two collection units, while the lower
site has only a single collection unit. Each of the top two collection
units appear to contain two datasets, while the bottom site has only the
one collection unit with only one dataset.</p>
</div>
<div class="section level4">
<h4 id="searching-for-sites-by-name">Searching for Sites by Name<a class="anchor" aria-label="anchor" href="#searching-for-sites-by-name"></a>
</h4>
<p>Often we do not know the particular <code>siteid</code>. If we’re
looking for a site and we know its name or a part of its name, we can
search using the function with the <code>sitename</code> argument,
<code>get_site(sitename = 'XXX')</code>, where <code>'XXX'</code> is the
site name. This does not support multiple text strings (i.e., you can’t
use <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">alex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span>sitename <span class="op">=</span> <span class="st">"Alexander Lake"</span><span class="op">)</span></span>
<span><span class="va">alex</span></span>
<span><span class="co">#&gt;  siteid       sitename      lat      long altitude</span></span>
<span><span class="co">#&gt;      24 Alexander Lake 53.33333 -60.58333      143</span></span></code></pre></div>
<p>Neotoma uses a Postgres Database to manage data. Postgres uses the
<code>%</code> sign as a general wildcard, so we can use the
<code>%</code> in the <code>sitename</code> argument operator to help us
find sites when we’re not sure the exact match. Note that the search is
case <strong>insensitive</strong> so a search for <code>alex%</code> or
<code>Alex%</code> will return the same results.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">alex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span>sitename <span class="op">=</span> <span class="st">'Alex%'</span><span class="op">)</span></span>
<span><span class="va">alex</span></span>
<span><span class="co">#&gt;  siteid           sitename      lat      long altitude</span></span>
<span><span class="co">#&gt;      24     Alexander Lake 53.33333 -60.58333      143</span></span>
<span><span class="co">#&gt;      25        Alexis Lake 52.51667 -57.03333      200</span></span>
<span><span class="co">#&gt;    4478 Alexander [3CN117] 35.25000 -92.61667       88</span></span>
<span><span class="co">#&gt;   26226     Alexandra Lake 43.29030 -74.16966      354</span></span></code></pre></div>
<!-- Since this new `sites` object has 4 elements that belong to `site`, we may want to access only one of the objects, or sets of metadata from our variable `alex`. -->
</div>
<div class="section level4">
<h4 id="searching-for-sites-by-age">Searching for Sites by Age<a class="anchor" aria-label="anchor" href="#searching-for-sites-by-age"></a>
</h4>
<p>There are several ways of searching for sites using age parameters.
These are represented below:</p>
<div class="figure">
<img src="images/understandingAgeRanges.svg" style="width:100.0%" alt=""><p class="caption">Site searches using age parameters including
<code>ageof</code>, <code>ageyoung</code>, <code>ageold</code>,
<code>maxage</code> and <code>minage</code>.</p>
</div>
<p>We offer several methods of searching because different users have
different requirements. A user might be only interested in one specific
point in time in the past, for example the 8.2ka event. In this instance
they would search <code>get_sites(ageof = 8200)</code>. They may want
sites with records that completely span a time period, for example the
Atlantic chronozone of the Holocene:
<code>get_sites(ageyounger = 5000, ageolder = 8000)</code>. These sites
would have samples both within and outside the defined age range, so
that the user could track change into and out of the time period. A user
may also be interested in any record within a time bin, regardless of
whether the site spans that time zone or not. They would query
<code>get_sites(minage = 5000, maxage = 8000)</code>.</p>
<p>We can see how these age bounds differ:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Note, we are using the `all_data = TRUE` flag here to avoid the default limit of 25 records, discussed below.</span></span>
<span><span class="co"># Because these queries are searching through every record they are slow and and are not</span></span>
<span><span class="co"># run in knitting this vignette.</span></span>
<span><span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span>ageof <span class="op">=</span> <span class="fl">8200</span>, all_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span>ageyounger <span class="op">=</span> <span class="fl">5000</span>, ageolder <span class="op">=</span> <span class="fl">8000</span>, all_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span>minage <span class="op">=</span> <span class="fl">5000</span>, maxage <span class="op">=</span> <span class="fl">8000</span>, all_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>It is possible to pass all parameters (<code>ageof</code>,
<code>minage</code>, <code>maxage</code>, <code>ageyounger</code>, . . .
), but it is likely that these will conflict and result in an empty set
of records. To avoid this, be aware of the relationships among these
search parameters, and how they might affect your search window.</p>
</div>
</div>
<div class="section level3">
<h3 id="accessing-sites-metadata">Accessing <code>sites</code> metadata<a class="anchor" aria-label="anchor" href="#accessing-sites-metadata"></a>
</h3>
<p>Although the <code>sites</code> are structured using S4 objects (see
<a href="http://adv-r.had.co.nz/S4.html" class="external-link">Hadley Wickham’s S4
documentation</a>), we’ve added helper functions to make accessing
elements easier for users.</p>
<p>The <code>alex</code> object is composed of several smaller objects
of class <code>site</code>. We can call any individual site using
<code>[[ ]]</code>, placing the index of the desired object between the
brackets. Then we can also call the particular variable we want using
the <code>$</code> symbol.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">alex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span>sitename <span class="op">=</span> <span class="st">"Alexander Lake"</span><span class="op">)</span></span>
<span><span class="va">alex</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">siteid</span></span>
<span><span class="co">#&gt; [1] 24</span></span></code></pre></div>
<p>The elements within a <code>site</code> are the same as the defined
columns within the Neotoma <a href="https://open.neotomadb.org/dbschema/tables/sites.html" class="external-link"><code>ndb.sites</code></a>
table, with the exception of the <code>collunits</code> slot, which
contains the collection units and associated datasets that are found
within a site. You can see all the <code>site</code> slots using the
<code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code> function. You can select individual elements of a
<code>site</code>, and you can assign values to these parameters:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">alex</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "siteid"       "sitename"     "geography"    "altitude"     "geopolitical"</span></span>
<span><span class="co">#&gt; [6] "area"         "notes"        "description"  "collunits"</span></span>
<span></span>
<span><span class="co"># Modify a value using $&lt;- assignment:</span></span>
<span><span class="va">alex</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">area</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="va">alex</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">area</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span><span class="va">alex</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">area</span></span>
<span><span class="co">#&gt; [1] 100</span></span>
<span></span>
<span><span class="co"># Modify a value using [&lt;- assignment:</span></span>
<span><span class="va">alex</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="st">"area"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">30</span></span>
<span><span class="co"># alex[[1]][7] &lt;- 30  This fails because the `Notes` field expects a character string.</span></span></code></pre></div>
<p>Using assignment, we can add information programmatically, for
example, by working interactively with a digital elevation model or
hydrographic data to obtain lake area measurements. Although not
currently implemented, the goal is to support direct upload of updated
information by users.</p>
</div>
<div class="section level3">
<h3 id="creating-a-site">Creating a Site<a class="anchor" aria-label="anchor" href="#creating-a-site"></a>
</h3>
<p>As explained above, a <code>site</code> is the fundamental unit of
the Neotoma Database. If you are working with your own data, you might
want to create a <code>site</code> object to allow it to interact with
other data within Neotoma. You can create a site with the
<code><a href="../reference/set_site.html">set_site()</a></code> function. It will ask you to provide important
information such as <code>sitename</code>, <code>lat</code>, and
<code>long</code> attributes.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_site</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_site.html">set_site</a></span><span class="op">(</span>sitename <span class="op">=</span> <span class="st">"My Lake"</span>, </span>
<span>                    geography <span class="op">=</span> <span class="fu">st_sf</span><span class="op">(</span>a <span class="op">=</span> <span class="fl">3</span>, <span class="fu">st_sfc</span><span class="op">(</span><span class="fu">st_point</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                    description <span class="op">=</span> <span class="st">"my lake"</span>, </span>
<span>                    altitude <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span><span class="va">my_site</span></span>
<span><span class="co">#&gt;                                siteid sitename lat long altitude</span></span>
<span><span class="co">#&gt;  830d959c-3ac0-48d7-aec0-510b815fb709  My Lake   2    1       30</span></span></code></pre></div>
<p>If we have a set of sites that we are analyzing, we can add the new
site to the set of sites, either by appending it to the end, using
<code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>, or by replacing a particular element using
<code>[[&lt;-</code>.</p>
<p>This method allows us to begin modifying site information for
existing sites if we have updated knowledge about site properties.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a new site that's been edited using set_site()</span></span>
<span><span class="va">longer_alex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">alex</span>, <span class="va">my_site</span><span class="op">)</span></span>
<span><span class="co"># Or replace an element within the existing list of sites</span></span>
<span><span class="co"># with the newly created site.</span></span>
<span><span class="va">longer_alex</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">my_site</span></span>
<span></span>
<span><span class="co"># Or append to the `sites` list with assignment:</span></span>
<span><span class="va">longer_alex</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">my_site</span></span></code></pre></div>
<p>We can also use <code>set_sites()</code> as a tool to update the
metadata associated with an existing site object:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Update a value within an existing `sites` object:</span></span>
<span><span class="va">longer_alex</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_site.html">set_site</a></span><span class="op">(</span><span class="va">longer_alex</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  altitude <span class="op">=</span> <span class="fl">3000</span><span class="op">)</span></span>
<span><span class="va">longer_alex</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="datasets">Datasets<a class="anchor" aria-label="anchor" href="#datasets"></a>
</h2>
<p>If you need to get to a deeper level of the sites object, you may
want to look at the <code><a href="../reference/get_datasets.html">get_datasets()</a></code> function. You can use
<code><a href="../reference/get_datasets.html">get_datasets()</a></code> using search parameters, or you can use it
on an existing <code>sites</code> object, such as our prior
<code>alex</code> dataset.</p>
<p><code><a href="../reference/get_datasets.html">get_datasets()</a></code> adds additional metadata to the
<code>site</code> objects, letting us know which
<code>datasettypes</code> are associated with a site, and the dataset
sample locations at the site.</p>
<div class="figure">
<img src="images/understanding_S4_structure_get_datasets.svg" style="width:100.0%" alt=""><p class="caption">Using <code><a href="../reference/get_datasets.html">get_datasets()</a></code> provides more
complete metadata about a record, including the addition of
chronological information, and more complete metadata about the
datasets, compared to the <code><a href="../reference/get_sites.html">get_sites()</a></code> call, shown above.
The objects here are the same as above, but now have chronology
metadata, and contact metadata for the records. Note that there is still
no sample or taxonomic information about these records. This comes from
the <code><a href="../reference/get_downloads.html">get_downloads()</a></code> function.</p>
</div>
<p>Getting the datasets by id is the easiest call, you can also pass a
vector of IDs or, if you already have a <code>sites</code> object, you
can pass a sites object.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Getting datasets by ID</span></span>
<span><span class="va">my_datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_datasets.html">get_datasets</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">my_datasets</span></span>
<span><span class="co">#&gt;  siteid                   sitename       lat      long altitude</span></span>
<span><span class="co">#&gt;       5                       17/2  55.25000 -74.93333      335</span></span>
<span><span class="co">#&gt;      10 Site 1 (Cohen unpublished)  30.83000 -82.33000       37</span></span>
<span><span class="co">#&gt;      15                    Aguilar -23.83333 -65.75000     4000</span></span>
<span><span class="co">#&gt;      20                   Akuvaara  69.12326  27.67406      170</span></span></code></pre></div>
<p>You can also retrieve datasets by type directly from the API.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Getting datasets by type</span></span>
<span><span class="va">my_pollen_datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_datasets.html">get_datasets</a></span><span class="op">(</span>datasettype <span class="op">=</span> <span class="st">"pollen"</span>, limit <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span>
<span><span class="va">my_pollen_datasets</span></span>
<span><span class="co">#&gt;  siteid                            sitename       lat       long altitude</span></span>
<span><span class="co">#&gt;       7                     Three Pines Bog  47.00000  -80.11667      294</span></span>
<span><span class="co">#&gt;       8                 Abalone Rocks Marsh  33.95639 -119.97667        0</span></span>
<span><span class="co">#&gt;       9                              Adange  43.30556   41.33333     1750</span></span>
<span><span class="co">#&gt;      11        Konus Exposure, Adycha River  67.75000  135.58333      130</span></span>
<span><span class="co">#&gt;      12                       Ageröds Mosse  55.93329   13.42559       58</span></span>
<span><span class="co">#&gt;      13                     Aguas Calientes -23.08333  -67.40000     4210</span></span>
<span><span class="co">#&gt;      14                   Aguas Calientes 2 -23.50000  -67.58333     4210</span></span>
<span><span class="co">#&gt;      15                             Aguilar -23.83333  -65.75000     4000</span></span>
<span><span class="co">#&gt;      16                           Ahlenmoor  53.69908    8.74688        2</span></span>
<span><span class="co">#&gt;      17                               Ajata -18.25000  -69.20000     4700</span></span>
<span><span class="co">#&gt;      18                    South Soefje Bog  29.60000  -97.51694       97</span></span>
<span><span class="co">#&gt;      19             Akulinin Exposure P1282  47.11667  138.55000       20</span></span>
<span><span class="co">#&gt;      20                            Akuvaara  69.12326   27.67406      170</span></span>
<span><span class="co">#&gt;      21 Alazeya River Exposure, 8 m Terrace  68.50000  154.50000       40</span></span>
<span><span class="co">#&gt;      22 Alazeya River Exposure, 9 m Terrace  64.33333  154.50000       40</span></span>
<span><span class="co">#&gt;      24                      Alexander Lake  53.33333  -60.58333      143</span></span>
<span><span class="co">#&gt;      25                         Alexis Lake  52.51667  -57.03333      200</span></span>
<span><span class="co">#&gt;      27                          Aliuk Pond  54.58333  -57.36667       25</span></span>
<span><span class="co">#&gt;      29                          Lake Allie  44.80156  -94.55982      328</span></span>
<span><span class="co">#&gt;      30                         Almora Lake  46.20611  -95.29361      437</span></span>
<span><span class="co">#&gt;      31                           Alut Lake  60.13667  152.31278      480</span></span>
<span><span class="co">#&gt;      32                             Amarete -15.23333  -68.98333     4000</span></span>
<span><span class="co">#&gt;      33             Amba River Exposure 596  43.31667  131.81667        5</span></span>
<span><span class="co">#&gt;      68     Amguema River Valley Exposure 1  67.75000  178.70000      175</span></span>
<span><span class="co">#&gt;      69     Amguema River Valley Exposure 2  67.66667  178.60000       87</span></span></code></pre></div>
<p>It can be computationally intensive to obtain the full set of records
for <code>sites</code> or <code>datasets</code>. By default the
<code>limit</code> for all queries is <code>25</code>. The default
<code>offset</code> is <code>0</code>. To capture all results we can use
the <code>all_data = TRUE</code> flag in our calls.
<strong>However</strong>, this is hard on the Neotoma servers. We tend
to prefer that users use <code>all_data = TRUE</code> once their
analytic workflow is mostly complete.</p>
<p>We can use that <code>all_data = TRUE</code> in R in the following
way:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allSites_dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span>datasettype <span class="op">=</span> <span class="st">"diatom"</span><span class="op">)</span></span>
<span><span class="va">allSites_dt_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span>datasettype <span class="op">=</span> <span class="st">"diatom"</span>, all_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Because we used the `all_data = TRUE` flag, there will be more sites</span></span>
<span><span class="co"># in allSites_dt_all, because it represents all sites containing diatom datasets.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">allSites_dt_all</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">allSites_dt</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="spatial-searches">Spatial Searches<a class="anchor" aria-label="anchor" href="#spatial-searches"></a>
</h3>
<p>You can get the coordinates to create a GeoJson bounding box from <a href="https://geojson.io/#map=2/20.0/0.0" class="external-link">here</a>, or you can use
pre-existing objects within R, for example, country-level data within
the <code>spData</code> package:</p>
<p>Accessing datasets by bounding box:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">brazil</span> <span class="op">&lt;-</span> <span class="st">'{"type": "Polygon", </span></span>
<span><span class="st">            "coordinates": [[</span></span>
<span><span class="st">                [-73.125, -9.102],</span></span>
<span><span class="st">                [-56.953, -33.138],</span></span>
<span><span class="st">                [-36.563, -7.711],</span></span>
<span><span class="st">                [-68.203, 13.923],</span></span>
<span><span class="st">                [-73.125, -9.102]</span></span>
<span><span class="st">              ]]}'</span></span>
<span></span>
<span><span class="co"># We can make the geojson a spatial object if we want to use the</span></span>
<span><span class="co"># functionality of the `sf` package.</span></span>
<span><span class="va">brazil_sf</span> <span class="op">&lt;-</span> <span class="fu">geojsonsf</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/geojsonsf/man/geojson_sf.html" class="external-link">geojson_sf</a></span><span class="op">(</span><span class="va">brazil</span><span class="op">)</span></span>
<span></span>
<span><span class="va">brazil_datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_datasets.html">get_datasets</a></span><span class="op">(</span>loc <span class="op">=</span> <span class="va">brazil_sf</span><span class="op">)</span></span>
<span><span class="va">brazil_datasets</span></span>
<span><span class="co">#&gt;  siteid                   sitename       lat      long altitude</span></span>
<span><span class="co">#&gt;      32                    Amarete -15.23333 -68.98333     4000</span></span>
<span><span class="co">#&gt;     211             Lago do Aquiri  -3.16667 -44.98333       10</span></span>
<span><span class="co">#&gt;     323                 Cala Conto -17.56667 -65.93333     2700</span></span>
<span><span class="co">#&gt;     347               Chacaltaya 1 -16.36667 -68.15000     4750</span></span>
<span><span class="co">#&gt;     348               Chacaltaya 2 -16.36667 -68.15000     4350</span></span>
<span><span class="co">#&gt;     523             Cumbre Unduavi -16.35000 -68.04167     4620</span></span>
<span><span class="co">#&gt;     532            Lagoa das Patas   0.26667 -66.68333      300</span></span>
<span><span class="co">#&gt;     843        Serra Campos Gerais -24.66667 -50.21667     1200</span></span>
<span><span class="co">#&gt;    1406                  Katantica -14.80000 -69.18333     4820</span></span>
<span><span class="co">#&gt;    1994                 Río Kaluyo -16.43333 -68.13333     4070</span></span>
<span><span class="co">#&gt;    2827                  Wasa Mayu -17.53333 -65.81667     2720</span></span>
<span><span class="co">#&gt;    9685              Laguna Granja -13.26341 -63.71025      138</span></span>
<span><span class="co">#&gt;    9686             Laguna Orícore -13.34833 -63.52796      139</span></span>
<span><span class="co">#&gt;   11923              Lake Valencia  10.16576 -67.76755      410</span></span>
<span><span class="co">#&gt;   13964              Lake Chalalán -14.42868 -67.92125      330</span></span>
<span><span class="co">#&gt;     526            Lagoa da Curuça  -0.76667 -47.85000       35</span></span>
<span><span class="co">#&gt;    1717               Monte Blanco -17.02500 -67.35000     4780</span></span>
<span><span class="co">#&gt;    2248 Lagoa Campestre de Salitre -19.00000 -46.76667      980</span></span>
<span><span class="co">#&gt;   11877              Lake Consuelo -13.95125 -68.99162     1333</span></span></code></pre></div>
<p>Now we have an object called <code>brazil_datasets</code> that
contains 19.</p>
<p>You can plot these findings!</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotLeaflet.html">plotLeaflet</a></span><span class="op">(</span><span class="va">brazil_datasets</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-e926b2bf5aec28f22467" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-e926b2bf5aec28f22467">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Stamen.TerrainBackground",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[-15.23333,-3.16667,-17.56667,-16.36667,-16.36667,-16.35,0.26667,-24.66667,-14.8,-16.43333,-17.53333,-13.263406,-13.348328,10.165756,-14.428682,-0.76667,-17.025,-19,-13.951252],[-68.98333,-44.98333,-65.93333,-68.15,-68.15,-68.04167,-66.68333,-50.21667,-69.18333,-68.13333,-65.81667,-63.710252,-63.527964,-67.767554,-67.921248,-47.85,-67.35,-46.76667,-68.991618],10,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":true,"riseOffset":250,"stroke":true,"color":"#03F","weight":5,"opacity.1":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,["<b>Amarete<\/b><br><b>Description:<\/b> Mire.<br><a href=http://apps.neotomadb.org/explorer/?siteids=32>Explorer Link<\/a>","<b>Lago do Aquiri<\/b><br><b>Description:<\/b> Natural lake, sometimes flooded by river. Physiography: soft rolling area with flood plains. Surrounding vegetation: anthropog. palm forest, swamp savanna.<br><a href=http://apps.neotomadb.org/explorer/?siteids=211>Explorer Link<\/a>","<b>Cala Conto<\/b><br><b>Description:<\/b> Interandean plain.<br><a href=http://apps.neotomadb.org/explorer/?siteids=323>Explorer Link<\/a>","<b>Chacaltaya 1<\/b><br><b>Description:<\/b> NA<br><a href=http://apps.neotomadb.org/explorer/?siteids=347>Explorer Link<\/a>","<b>Chacaltaya 2<\/b><br><b>Description:<\/b> NA<br><a href=http://apps.neotomadb.org/explorer/?siteids=348>Explorer Link<\/a>","<b>Cumbre Unduavi<\/b><br><b>Description:<\/b> NA<br><a href=http://apps.neotomadb.org/explorer/?siteids=523>Explorer Link<\/a>","<b>Lagoa das Patas<\/b><br><b>Description:<\/b> Lake, 300m x 7m on low inselberg. Physiography: small closed basin with flat bottom. Surrounding vegetation: dense, lowland tropical rain forest.<br><a href=http://apps.neotomadb.org/explorer/?siteids=532>Explorer Link<\/a>","<b>Serra Campos Gerais<\/b><br><b>Description:<\/b> Peat bog. Physiography: highland plain, next to a river vally. Surrounding vegetation: farmland.<br><a href=http://apps.neotomadb.org/explorer/?siteids=843>Explorer Link<\/a>","<b>Katantica<\/b><br><b>Description:<\/b> NA<br><a href=http://apps.neotomadb.org/explorer/?siteids=1406>Explorer Link<\/a>","<b>Río Kaluyo<\/b><br><b>Description:<\/b> NA<br><a href=http://apps.neotomadb.org/explorer/?siteids=1994>Explorer Link<\/a>","<b>Wasa Mayu<\/b><br><b>Description:<\/b> NA<br><a href=http://apps.neotomadb.org/explorer/?siteids=2827>Explorer Link<\/a>","<b>Laguna Granja<\/b><br><b>Description:<\/b> Oxbow lake 300 m from the modern San Martín River. Upland vegetation: seasonal southern Amazonian rainforest; immediate vegetation is riverine forest dominated by Vochysia mapirensis and Buchenavia oxycarpa; wider region dominated by closed-canopy terra firme evergreen rainforest, which is degraded by modern anthropogenic disturbance to a distance of 5 km from the lake. Littoral margins of the lake dominated by floating mats of aquatic vegetation, including Marsilea polycarpa and Eichhornia azurea. The ring-ditch archaeological site Granja del Padre lies 100 m from the eastern shore of the lake.<br><a href=http://apps.neotomadb.org/explorer/?siteids=9685>Explorer Link<\/a>","<b>Laguna Orícore<\/b><br><b>Description:<\/b> Large, shallow, flat-bottomed lake in the Beni Basin. Upland vegetation: seasonal southern Amazonian rainforest; the Beni Basin is seasonally inundated savanna mosaic. Terra firma pre-Cambrian shield outcrops at the northeast margin of the lake and lies 3 km north of the lake. The terra firma is covered with evergreen humid rainforest.<br><a href=http://apps.neotomadb.org/explorer/?siteids=9686>Explorer Link<\/a>","<b>Lake Valencia<\/b><br><b>Description:<\/b> Large graben. Physiography: valley between coastal mountains. Surrounding vegetation: savanna, crops and seral vegetation.<br><a href=http://apps.neotomadb.org/explorer/?siteids=11923>Explorer Link<\/a>","<b>Lake Chalalán<\/b><br><b>Description:<\/b> The lake, which lies approximately 10 m above the modern level of Rio Tuichi, has an oval basin c. 900 m long by 500 m at its widest part. This steepsided lake reaches depths of 5 m within 5 m of the current shoreline. Secchi depth in Lake Chalalan is reached at c. 2 m, suggesting mesotrophic conditions. Surrounding modern vegetation is lowland evergreen forest dominated by Iriartea deltoidea, Mauritia flexuosa, Oenocarpus bataua, Hura crepitans, Ceiba pentandra, Pentaplaris davidsmithii, and Cecropia spp. Located west of the rural community of Rurrenabaque in the Upper Beni River, in the Bolivian Amazon. Mean annual precipitation at Rurrenabaque is 2550 mm while mean annual temperature is 26°C.<br><a href=http://apps.neotomadb.org/explorer/?siteids=13964>Explorer Link<\/a>","<b>Lagoa da Curuça<\/b><br><b>Description:<\/b> Lake. Physiography: isolated lake, 15 km from the Atlantic. Surrounding vegetation: Amazon rain forest.<br><a href=http://apps.neotomadb.org/explorer/?siteids=526>Explorer Link<\/a>","<b>Monte Blanco<\/b><br><b>Description:<\/b> NA<br><a href=http://apps.neotomadb.org/explorer/?siteids=1717>Explorer Link<\/a>","<b>Lagoa Campestre de Salitre<\/b><br><b>Description:<\/b> Peat bog in a depression. Physiography: depression. Surrounding vegetation: semideciduous forest/dry forest.<br><a href=http://apps.neotomadb.org/explorer/?siteids=2248>Explorer Link<\/a>","<b>Lake Consuelo<\/b><br><b>Description:<\/b> Lake Consuelo is constantly immersed in ground-level clouds on most days and sits at 1360 m asl, 2500 m down slope from the Bolivian Altiplano and Lake Titicaca. The lake is located within a small, closed basin with moderately steep slopes that result in thin soils with duff layers thickening above 1400 m asl. Lake Consuelo is located very close to the Manu super-humid region identified by Killeen et al., (2007) as biodiversity hotspots.<br><a href=http://apps.neotomadb.org/explorer/?siteids=11877>Explorer Link<\/a>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-24.66667,10.165756],"lng":[-69.18333,-44.98333]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="filtering-records">Filtering Records<a class="anchor" aria-label="anchor" href="#filtering-records"></a>
</h2>
<p>Sometimes we take a large number of records, do some analysis, and
then choose to select a subset. For example, we may want to select all
sites in a region, and then subset those by dataset type. If we want to
look at only the geochronological datasets from Brazil, we can start
with the set of records returned from our <code><a href="../reference/get_datasets.html">get_datasets()</a></code>
query, and then use the <code>filter</code> function in
<code>neotoma2</code> to select only those datasets that are
geochronologic:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">brazil_dates</span> <span class="op">&lt;-</span> <span class="fu">neotoma2</span><span class="fu">::</span><span class="fu"><a href="../reference/filter.html">filter</a></span><span class="op">(</span><span class="va">brazil_datasets</span>,</span>
<span>  <span class="va">datasettype</span> <span class="op">==</span> <span class="st">"geochronologic"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or:</span></span>
<span></span>
<span><span class="va">brazil_dates</span> <span class="op">&lt;-</span> <span class="va">brazil_datasets</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">neotoma2</span><span class="fu">::</span><span class="fu"><a href="../reference/filter.html">filter</a></span><span class="op">(</span><span class="va">datasettype</span> <span class="op">==</span> <span class="st">"geochronologic"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># With boolean operators:</span></span>
<span></span>
<span><span class="va">brazil_space</span> <span class="op">&lt;-</span> <span class="va">brazil_datasets</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">neotoma2</span><span class="fu">::</span><span class="fu"><a href="../reference/filter.html">filter</a></span><span class="op">(</span><span class="va">lat</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">18</span> <span class="op">&amp;</span> <span class="va">lat</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">16</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/filter.html">filter()</a></code> function takes as the first argument, a
datasets object, followed by the criteria we want to use to filter.
Current supported criteria includes:</p>
<ul>
<li><code>lat</code></li>
<li><code>long</code></li>
<li><code>elev</code></li>
<li><code>datasettype</code></li>
</ul>
<p>You also need to make sure that you accompany any of these terms with
the following boolean operators: <code>&lt;</code>, <code>&gt;</code> or
<code>==</code>, <code>!=</code>. <code>datasettype</code> has to be of
type string, while the other terms must be numeric. If you need to
filter by the same argument, let’s say, you need to filter
“geochronologic” and “pollen data types, then you will also make use of
<code>&amp;</code> and <code>|</code> operators.</p>
</div>
<div class="section level2">
<h2 id="sample-and-taxonomic-data">Sample and Taxonomic data<a class="anchor" aria-label="anchor" href="#sample-and-taxonomic-data"></a>
</h2>
<p>Once we have the set of records we wish to examine, we then want to
recover the actual sample data. This will provide us with information
about the kinds of elements found at the site, within the dataset, their
sample ages, and their counts or measurements. To do this we use the
<code><a href="../reference/get_downloads.html">get_downloads()</a></code> call. Note, as before, we are returning a
<code>sites</code> objects, but this time with the most complete
metadata.</p>
<div class="figure">
<img src="images/understanding_S4_structure.svg" style="width:100.0%" alt=""><p class="caption">Using <code><a href="../reference/get_downloads.html">get_downloads()</a></code> returns a
<code>sites</code> object, but one that contains dataset objects with
filled <code>samples</code> slots. The <code>samples</code> slot is
often very large relative to the other metadata associated with
<code>sites</code>, and so it is commonly held back until a direct
request is provided. Helper functions at the <code>sites</code> level
can pull out <code>sample</code> data once <code><a href="../reference/get_downloads.html">get_downloads()</a></code>
has been called.</p>
</div>
<p>Assuming we continue with our example from Brazil, we want to extract
records from the country, filter to only pollen records with samples
covering the last 10,000 years, and then look at the relative frequency
of taxa across sites. We might do something like this:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">brazil</span> <span class="op">&lt;-</span> <span class="st">'{"type": "Polygon", </span></span>
<span><span class="st">            "coordinates": [[</span></span>
<span><span class="st">                [-73.125, -9.102],</span></span>
<span><span class="st">                [-56.953, -33.138],</span></span>
<span><span class="st">                [-36.563, -7.711],</span></span>
<span><span class="st">                [-68.203, 13.923],</span></span>
<span><span class="st">                [-73.125, -9.102]</span></span>
<span><span class="st">              ]]}'</span></span>
<span></span>
<span><span class="co"># We can make the geojson a spatial object if we want to use the</span></span>
<span><span class="co"># functionality of the `sf` package.</span></span>
<span><span class="va">brazil_sf</span> <span class="op">&lt;-</span> <span class="fu">geojsonsf</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/geojsonsf/man/geojson_sf.html" class="external-link">geojson_sf</a></span><span class="op">(</span><span class="va">brazil</span><span class="op">)</span></span>
<span></span>
<span><span class="va">brazil_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_datasets.html">get_datasets</a></span><span class="op">(</span>loc <span class="op">=</span> <span class="va">brazil_sf</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">neotoma2</span><span class="fu">::</span><span class="fu"><a href="../reference/filter.html">filter</a></span><span class="op">(</span><span class="va">datasettype</span> <span class="op">==</span> <span class="st">"pollen"</span> <span class="op">&amp;</span> <span class="va">age_range_young</span> <span class="op">&lt;=</span> <span class="fl">1000</span> <span class="op">&amp;</span> <span class="va">age_range_old</span> <span class="op">&gt;=</span> <span class="fl">10000</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/get_downloads.html">get_downloads</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">count_by_site</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/samples.html">samples</a></span><span class="op">(</span><span class="va">brazil_records</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">elementtype</span> <span class="op">==</span> <span class="st">"pollen"</span> <span class="op">&amp;</span> <span class="va">units</span> <span class="op">==</span> <span class="st">"NISP"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">siteid</span>, <span class="va">variablename</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">variablename</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'siteid'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span></code></pre></div>
<p>In this code chunk we define the bounding polygon for our sites,
filter by time and dataset type, and then return the full records for
those sites. We get a <code>sites</code> object with dataset and sample
information (because we used <code><a href="../reference/get_downloads.html">get_downloads()</a></code>). We execute
the <code><a href="../reference/samples.html">samples()</a></code> function to extract all the samples from the
<code>sites</code> objects, and then filter the resulting
<code>data.frame</code> to pull only pollen (a pollen dataset may
contain spores and other elements that are not, strictly speaking,
pollen) that are counted using the number of identified specimens (or
NISP). We then <code>group_by()</code> the unique site identifiers
(<code>siteid</code>) and the taxa (<code>variablename</code>) to get a
count of the number of times each taxon appears in each site. We then
want to <code>summarize()</code> to a higher level, just trying to
understand how many sites each taxon appears in. After that we
<code>arrange()</code> so that the records show the most common taxa
first in the resulting variable <code>count_by_site</code>.</p>
</div>
<div class="section level2">
<h2 id="publications">Publications<a class="anchor" aria-label="anchor" href="#publications"></a>
</h2>
<p>Many Neotoma records have publications associated with them. The
<code>publication</code> object (and the <code>publications</code>
collection) provide the opportunity to do this. The <a href="https://open.neotomadb.org/dbschema/tables/publications.html" class="external-link"><code>publication</code></a>
table in Neotoma contains an extensive number of fields. The methods for
<code>publications</code> in the <code>neotoma2</code> package provide
us with tools to retrieve publication data from Neotoma, to set and
manipulate publication data locally, and to retrieve publication data
from external sources (e.g., using a DOI).</p>
<div class="section level3">
<h3 id="get_publications-from-neotoma">
<code>get_publications()</code> from Neotoma<a class="anchor" aria-label="anchor" href="#get_publications-from-neotoma"></a>
</h3>
<p>The most simple case is a search for a publication based on one or
more publication IDs. Most people do not know the unique publication ID
of individual articles, but this provides a simple method to highlight
the way Neotoma retrieves and presents publication information.</p>
<div class="section level4">
<h4 id="get-publication-by-id">Get Publication By ID<a class="anchor" aria-label="anchor" href="#get-publication-by-id"></a>
</h4>
<p>We can use a single publication ID or multiple IDs. In either case
the API returns the publication(s) and creates a new
<code>publications</code> object (which consists of multiple individual
<code>publication</code>s).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">one</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_publications.html">get_publications</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span></span>
<span><span class="va">two</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_publications.html">get_publications</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">14</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>From there we can then then subset and extract elements from the list
using the standard <code>[[</code> format. For example:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">two</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt;   publicationid</span></span>
<span><span class="co">#&gt; 1            14</span></span>
<span><span class="co">#&gt;                                                                                                                                                                                                      citation</span></span>
<span><span class="co">#&gt; 1 Baker, R.G., R.S. Rhodes II, D.P. Schwert, A.C. Ashworth, T.J. Frest, G.R. Hallberg, and J.A. Janssens. 1986. A full- glacial biota from southeastern Iowa, USA. Journal of Quaternary Science 1(2):91-107.</span></span>
<span><span class="co">#&gt;    doi</span></span>
<span><span class="co">#&gt; 1 &lt;NA&gt;</span></span></code></pre></div>
<p>Will return the second publication in the list, corresponding to the
publication with <code>publicationid</code> 14 in this case.</p>
</div>
<div class="section level4">
<h4 id="get-publication-using-search">Get Publication using Search<a class="anchor" aria-label="anchor" href="#get-publication-using-search"></a>
</h4>
<p>We can also use search elements to search for publications. The
<code>get_publication</code> method uses the Neotoma API to search for
publications. We can search using the following properties:</p>
<ul>
<li><code>publicationid</code></li>
<li><code>datasetid</code></li>
<li><code>siteid</code></li>
<li><code>familyname</code></li>
<li><code>pubtype</code></li>
<li><code>year</code></li>
<li><code>search</code></li>
<li><code>limit</code></li>
<li><code>offset</code></li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">michPubs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_publications.html">get_publications</a></span><span class="op">(</span>search <span class="op">=</span> <span class="st">"Michigan"</span>, limit <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>This results in a set of 2 publications from Neotoma, equal to the
<code>limit</code>. If the number of matching publications is less than
the limit then the <code><a href="https://rdrr.io/r/base/length.html" class="external-link">length()</a></code> will be smaller.</p>
<p>Text matching in Neotoma is approximate, meaning it is a measure of
the overall similarity between the search string and the set of article
titles. This means that using a nonsense string may still return results
results:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">noise</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_publications.html">get_publications</a></span><span class="op">(</span>search <span class="op">=</span> <span class="st">"Canada Banada Nanada"</span>, limit <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>This returns a result set of length 5.</p>
<p>This returns the (Neotoma) ID, the citation and the publication DOI
(if that is stored in Neotoma). We can get the first publication using
the standard <code>[[</code> nomenclature:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">two</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt;   publicationid</span></span>
<span><span class="co">#&gt; 1            12</span></span>
<span><span class="co">#&gt;                                                                                                                          citation</span></span>
<span><span class="co">#&gt; 1 King, J.E. 1973. Late Pleistocene palynology and biogeography of the western Missouri Ozarks. Ecological Monographs 43:539-565.</span></span>
<span><span class="co">#&gt;    doi</span></span>
<span><span class="co">#&gt; 1 &lt;NA&gt;</span></span></code></pre></div>
<p>The output will look similar to the output for <code>two</code>
above, however you will see that only a single result will be returned
and the class (for a single publication) will be of type
<code>publication</code> (as opposed to <code>publications</code>).</p>
<p>We can select an array of <code>publication</code> objects using the
<code>[[</code> method, either as a sequence (<code>1:10</code>, or as a
numeric vector (<code>c(1, 2, 3)</code>)):</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select publications with Neotoma Publication IDs 1 - 10.</span></span>
<span><span class="va">pubArray</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_publications.html">get_publications</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># Select the first five publications:</span></span>
<span><span class="va">subPub</span> <span class="op">&lt;-</span> <span class="va">pubArray</span><span class="op">[[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">subPub</span></span>
<span><span class="co">#&gt;   publicationid</span></span>
<span><span class="co">#&gt; 1             1</span></span>
<span><span class="co">#&gt; 2             2</span></span>
<span><span class="co">#&gt; 3             3</span></span>
<span><span class="co">#&gt; 4             4</span></span>
<span><span class="co">#&gt; 5             5</span></span>
<span><span class="co">#&gt;                                                                                                                                                                                                                                                                                                                                                               citation</span></span>
<span><span class="co">#&gt; 1                                                                                                                                                                            International Organization for Standardization. 2006. Codes for the representation of names of countries and their subdivisions — Part 1: Country codes. ISO 3166-1, Geneva, Switzerland.</span></span>
<span><span class="co">#&gt; 2                                                                                                                                                                                                                                                                            United States Central Intelligence Agency. 2004. CIA World Factbook. Washington, DC, USA.</span></span>
<span><span class="co">#&gt; 3                                                                                                                                         Davis, M.B. 1978. Climatic interpretation of pollen in Quaternary sediments. Pages 35-51 in D. Walker and J.C. Guppy, editors. Biology and Quaternary environments. Australian Academy of Science, Canberra City, Australia.</span></span>
<span><span class="co">#&gt; 4 Nanavati, W., C. Whitlock, V. Outes, and G. Villarosa. 2011. Diatom-inferred wind activity at Lac du Sommet, southern Québec, Canada: A multiproxy paleoclimate reconstruction based on diatoms, chironomids, and pollen for the past 9500 years. The Holocene 21(6):925-938. http://hol.sagepub.com/content/21/6/925.full.pdf+html. [DOI: 10.1177/0959683611400199]</span></span>
<span><span class="co">#&gt; 5                                                                                                                                                                                                Janssen, C.R. 1968. Myrtle Lake: a late- and post-glacial pollen diagram from northern Minnesota. Canadian Journal of Botany 46(11):1397-1410. [DOI: 10.1139/b68-190]</span></span>
<span><span class="co">#&gt;                        doi</span></span>
<span><span class="co">#&gt; 1                     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2                     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3                     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4 10.1177/0959683611400199</span></span>
<span><span class="co">#&gt; 5          10.1139/b68-190</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="create-or-import-new-publications">Create (or Import) New Publications<a class="anchor" aria-label="anchor" href="#create-or-import-new-publications"></a>
</h4>
<p>Just as we can use the <code>set_sites()</code> function to set new
site information, we can also create new publication information using
<code><a href="../reference/set_publications.html">set_publications()</a></code>. With <code><a href="../reference/set_publications.html">set_publications()</a></code>
you can enter as much or as little of the article metadata as you’d
like, but it’s designed (in part) to use the CrossRef API to return
information from a DOI.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_pub</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_publications.html">set_publications</a></span><span class="op">(</span></span>
<span>  articletitle <span class="op">=</span> <span class="st">"Myrtle Lake: a late- and post-glacial pollen diagram from northern Minnesota"</span>,</span>
<span>  journal <span class="op">=</span> <span class="st">"Canadian Journal of Botany"</span>,</span>
<span>  volume <span class="op">=</span> <span class="fl">46</span><span class="op">)</span></span></code></pre></div>
<p>A <code>publication</code> has a large number of slots that can be
defined. These may be left blank, they may be set directly after the
publication is defined:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_pub</span><span class="op">@</span><span class="va">pages</span> <span class="op">&lt;-</span> <span class="st">"1397-1410"</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="workshops-and-code-examples">Workshops and Code Examples<a class="anchor" aria-label="anchor" href="#workshops-and-code-examples"></a>
</h2>
<ul>
<li>2022 International AL/IPA Meeting; Bariloche, Argentina
<ul>
<li>
<a href="https://open.neotomadb.org/Workshops/IAL_IPA-November2022/simple_workflow.html" class="external-link">English
Language Simple Workflow</a>
<ul>
<li>Topics: Simple search, climate gradients, stratigraphic
plotting</li>
<li>Spatial Domain: South America</li>
<li>Dataset Types: Diatoms</li>
</ul>
</li>
<li>
<a href="https://open.neotomadb.org/Workshops/IAL_IPA-November2022/simple_workflow_ES.html" class="external-link">Spanish
Language Simple Workflow</a>
<ul>
<li>Topics: Simple search, climate gradients, stratigraphic
plotting</li>
<li>Spatial Domain: South America</li>
<li>Dataset Types: Diatoms</li>
</ul>
</li>
<li>
<a href="https://open.neotomadb.org/Workshops/IAL_IPA-November2022/complex_workflow.html" class="external-link">English
Language Complex Workflow</a>
<ul>
<li>Topics: Chronology building, Bchron</li>
<li>Spatial Domain: South America</li>
<li>Dataset Types: Diatoms</li>
</ul>
</li>
<li>
<a href="https://open.neotomadb.org/Workshops/IAL_IPA-November2022/complex_workflow_ES.html" class="external-link">Spanish
Language Complex Workflow</a>
<ul>
<li>Topics: Chronology building, Bchron</li>
<li>Spatial Domain: South America</li>
<li>Dataset Types: Diatoms</li>
</ul>
</li>
</ul>
</li>
<li>2022 European Pollen Database Meeting; Prague, Czech Republic
<ul>
<li>
<a href="https://open.neotomadb.org/Workshops/EPD-May2022/simple_workflow.html" class="external-link">English
Language Simple Workflow</a>
<ul>
<li>Topics: Simple search, climate gradients, stratigraphic plotting,
taxonomic harmonization</li>
<li>Spatial Domain: Europe/Czech Republic</li>
<li>Dataset Types: Pollen</li>
</ul>
</li>
<li>
<a href="https://open.neotomadb.org/Workshops/EPD-May2022/complex_workflow.html" class="external-link">English
Language Complex Workflow</a>
<ul>
<li>Topics: Chronology building, Bchron</li>
<li>Spatial Domain: Europe/Czech Republic</li>
<li>Dataset Types: Pollen</li>
</ul>
</li>
</ul>
</li>
<li>2022 American Quaternary Association Meeting
<ul>
<li>
<a href="https://open.neotomadb.org/Workshops/AMQUA-June2022/simple_workflow.html" class="external-link">English
Language Simple Workflow</a>
<ul>
<li>Topics: Simple search, climate gradients, stratigraphic
plotting</li>
<li>Spatial Domain: North America</li>
<li>Dataset Types: Pollen</li>
</ul>
</li>
<li>
<a href="https://open.neotomadb.org/Workshops/AMQUA-June2022/complex_workflow.html" class="external-link">English
Language Complex Workflow</a>
<ul>
<li>Topics: Chronologies</li>
<li>Spatial Domain: North America</li>
<li>Dataset Types: Pollen</li>
</ul>
</li>
</ul>
</li>
<li>Neotoma-charcoal Workshop, Göttingen, Germany. Authors: Petr Kuneš
&amp; Thomas Giesecke
<ul>
<li>
<a href="https://rpubs.com/petrkunes/neotoma-charcoal" class="external-link">English
Language Workflow</a>
<ul>
<li>Topics: Simple Search, PCA, DCA, Charcoal/Pollen Correlation</li>
<li>Spatial Domain: Global/Czech Republic</li>
<li>Dataset Types: Pollen, Charcoal</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Dominguez Vidana Socorro, Simon Goring.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
